## Movies API
Этот проект служит библиотекой фильмов для быстрого поиска кино по простым критериями, например, год выпуска, рейтинг и т.д.

### Основные возможности сервиса
- CRUD операции для управления фильмами
- Фильтрация и сортировка фильмов
- Валидация данных
- Асинхронные операции с БД с помощью SQLAlchemy
- Автоматические миграции с помощью Alembic
- Автоматическое тестирование с помощью pytest

### Технологический стек
- Язык программирования: python
- Web api: fastapi+uvicorn
- База данных: sqlite
- ORM: sqlalchemy
- Миграции базы данных: alembic
- Валидация данных: pydantic
- Тестирование: pytest

### Итоговая структура проекта
```
├── movie_catalog
│   ├── alembic.ini
│   ├── README.md
│   ├── requirements.txt
│   ├── alembic
│   │   ├── env.py
│   │   ├── README
│   │   ├── script.py.mako
│   │   └── versions
│   ├── src
│   │   ├── database.py
│   │   ├── main.py
│   │   ├── models
│   │   │   └── movie.py
│   │   ├── repositories
│   │   │   └── movies.py
│   │   ├── routers
│   │   │   └── movies.py
│   │   └── schemas
│   │       └── movie.py
│   └── tests
└       └── test.py
```

### Как быстро запустить этот проект
1. Клонируйте этот репозиторий `git clone https://github.com/EnderEzhik/movies-api.git`
2. Установить зависимости проекта с помощью файла requirements.txt `pip install -r requirements.txt`
3. Примените миграции базы данных `alembic upgrade head`
4. Запустите проект с помощью команды `uvicorn src.main:app --reload`

Сервер будет доступен по адресу `http://127.0.0.1:8000`

### Ендпоинты
- GET / - основной ендпоинт для проверки работоспособности приложения
- GET /movies - Получить список всех доступных фильмов в библиотеке с фильтрами и сортировкой
- GET /movies/{movie_id} - Получить фильм по его id
- POST /movies - Добавить новый фильм в библиотеку
- PUT /movies/{movie_id} - Полностью обновить фильм в библиотеке по его id
- Patch /movies/{movie_id} - Изменить часть информации о фильме в библиотеке по его id
- Delete /movies/{movie_id} - Удалить фильм из библиотеки по его id

### Фильтрация и сортировка
Сервис поддерживает фильтрацию и сортировку при получении списка всех доступных фильмов в библиотеке по следующим параметрам:
- year_min - Минимальный год выпуска
- year_max - Максимальный год выпуска
- rating_min - Минимальный рейтинг
- order_by - сортировка по критерию - title, -title, year, -year, rating, -rating
- limit - Максимальное количество фильмов в ответе API
- offset - Смещение в списке фильмов относительно начала для постраничного отображения (пагинация)

### Модель данных
#### Movie (Фильм)
- id (int) - уникальный идентификатор записи фильма в базе данных
- title (str) - название фильма (от 2 до 200 символов)
- genre (str) - жанр (от 2 до 100 символов)
- rating (float) - рейтинг от 0 до 10
- year (int) - год выпуска (от 1888 до текущего года)

### Ограничения базы данных
- Рейтинг фильма не может быть меньше 0 или больше 10
- Год выпуска фильма не может быть меньше 1888 или больше текущего года
- Все поля обязательны для заполнения
